---
icon: book-open-reader
date: 2024-06-18
star: true
---

# Linux基础

> *Linux操作命令相关知识*

<!-- more -->



## 目录结构

| 目录        | 存储                             |
| :---------- | :------------------------------- |
| /bin        | 系统命令                         |
| /boot       | 启动相关                         |
| /dev        | 设备                             |
| /etc        | 配置文件                         |
| /home       | 普通用户家目录                   |
| /lib        | 库文件                           |
| /lib64      | 64位库文件                       |
| /lost+found | 系统异常临时保存数据             |
| /media      | 媒体                             |
| /mnt        | 挂载                             |
| /opt        | 系统非必须软件                   |
| /proc       | 虚拟文件系统，映射硬件信息，进程 |
| /root       | root家目录                       |
| /sbin       | 超级用户命令                     |
| /selinux    | 安全机制                         |
| /srv        | 本机数据或服务                   |
| /sys        | 虚拟文件系统，映射系统信息       |
| /tmp        | 临时文件                         |
| /usr        | 应用程序                         |
| /var        | 系统产生不可销毁文件             |

* 虚拟文件系统：开机才存在

## vim

### 介绍

> vi的扩展，被誉为终端编辑器之神
>

### 安装

```bash
yum install -y vim
```

### 工作模式

#### 正常模式

```bash
vim file.type
```

| 操作        | 功能            |
| ----------- | --------------- |
| vim file +n | 定位到n行       |
| vim file +  | 定位末行        |
| gg          | 定位首行        |
| G           | 定位末行        |
| ngg         | 定位n行         |
| ^           | 定位开头        |
| $           | 定位末尾        |
| yy          | 复制光标行      |
| p           | 粘贴            |
| nyy         | 复制光标开始n行 |
| dd          | 剪切光标行      |
| ndd         | 剪切光标开始n行 |
| esc         | 退回正常模式    |
| ZZ          | 保存退出        |
| u           | 撤销            |
| ctrl + r    | 反撤销          |

####  插入模式

| 操作 | 功能               |
| ---- | ------------------ |
| i    | 光标处插入         |
| I    | 光标行首插入       |
| a    | 光标下个字符插入   |
| A    | 行尾插入           |
| o    | 光标下一行插入空行 |
| O    | 光标上一行插入空行 |
| s    | 删除光标处插入     |
| S    | 删除光标行插入     |

#### 编辑模式

| 操作          | 功能               |
| ------------- | ------------------ |
| :w            | 保存               |
| :q            | 退出               |
| :x            | 等价:wq            |
| !             | 强制操作           |
| :set nu       | 显示行号           |
| :set nonu     | 隐藏行号           |
| :n            | 定位n行            |
| /             | 查找；n下翻；N上翻 |
| :%s/old/new   | 替换               |
| :m,ns/old/new | 替换区间内容       |

## 文件

* ls
  * -l：列表显示
  * -a：显示全部
  * -h：人性化显示
  * -d：显示目录
* cd
  * ~：家目录
  * -：上次目录

### 文件整理

* touch：创建文件
* rm：删除文件，-f强制删除
* cp：拷贝文件，-r拷贝文件夹
* mv：移动文件/文件夹，重命名
* mkdir：创建文件夹，-p嵌套创建
* rmdir：删除文件夹，-f强制删除，-r递归删除

### 文件查看

* cat：从上到下查看文件
* tac：从下到上查看文件
* nl：同cat，显示行号
* head：查看开头10行内容，-n指定行数
* tail：查看末尾10行内容，-n指定行数
* more：分次加载内容，回车一行，空格一页，加载完毕退出，q退出
* less：同more，加载完毕不退出，可上下翻动
* wc：文件信息

### 文件权限

> ll查看相关属性

* chmod [所属用户 所属用户组 其他用户] 文件
  * 八进制设置用户权限

* chmod 对象 修改 权限 文件
  * 身份：
    * u：用户
    * g：组
    * o：其它
    * a：所有
  * 修改：
    * +：添加
    * -：去除
    * =：设置
  * 权限：
    * r：读
    * w：写
    * x：执行

### 链接

* ln [-s] 文件 文件：创建硬链接，-s创建软链接

## 查找

### tree：查看目录结构

* -L：指定深度

### find：查找文件

* -name：文件名

* -type：类型

* -size：大小，+大于，-小于

* -perm：权限

* -user：用户

* -group：组

* -maxdepth：深度

* -ctime：修改时间

  > ----(+n)---------|------------(n)--------------|---------(-n)----
  >   (n+1)24H前  |  (n+1)24H ~ n24H之间 | n24H以内

### whereis：查找程序

### which： 查找命令

> *alias：给命令取别名*
>
> *unalias：取消别名*

### grep：正则匹配

> *可结合管道使用*

* -i：不分大小写
* -n：显示行号

## 用户、用户组

### 用户

* useradd：创建用户
  * -d：指定家目录
  * -u：指定uid，大于500
  * -g：指定gid，大于500
  * -s：指定shell解释器，禁止登录/sbin/nologin，默认/bin/bash
* passwd 用户：设置密码
  * --stdin：管道输入密码
* userdel 用户：删除用户，-rf删除用户相关目录
* su 用户：切换用户

### 用户组

* groupadd：创建用户组
* groupdel：删除用户组
* gpasswd 用户 用户组：-a加入用户，-d删除用户

### 属性

* chgrp 组 文件：改变文件所属组
* chown 用户[:用户组] 文件：改变文件所属用户和组
* chsh 用户 -s:改变shell解释器

### 信息

* /etc/passwd：用户信息
* /etc/group：用户组信息
* /etc/shadow：用户密码

## 磁盘

* 磁盘使用流程：磁盘=>分区=>格式化=>挂载

> hd开头为IDE，sd开头为SCSI，后续a为主磁盘，1-4为主分区或扩展分区，5开始为逻辑分区

### 磁盘挂载

* mount [-t 文件系统] 磁盘分区 挂载位置：挂载

* mount：查看挂载情况
* umount 磁盘分区/挂载位置：取消挂载

> */etc/fstab：开机挂载内容*

### 磁盘信息

* df：查看磁盘分区使用情况
* du：查看指定目录使用情况 
* free：查看内存使用情况
* lsblk：挂载情况

## 系统服务

### 网络

> *网卡位置：/etc/sysconfig/network-scripts/*

* ifup：启动网卡
* ifdown：关闭网卡

### 资源使用

* w：当前进程
* top：w详细显示
* vmstat：虚拟内存

### 进程

* ps：查看进程
  * a：全部
  * u：用户
  * x：后台
* kill -9 PID：结束进程

### 服务控制

* systemctl
  * enable/disable 服务：开机自启/关闭
  * list-unit-files：所有服务情况
  * start：启动
  * stop：停止
  * restart：重启

## 压缩解压

* zip/unzip：后缀zip，可多文件
* gzip/gunzip：后缀gz，只能压缩单个文件，原文件删除

* bzip2/bunzip2：后缀bz2，同上，-k压缩保留原文件
* tar：后缀tar，打包解包
  * -c：打包
  * -x：解包
  * -t：查看包
  * -f：指定文件
  * -v：显示详细信息
  * -z：使用gzip/gunzip
  * -j：使用bzip2/bunzip2

## 软件安装

### 源码安装

> *需要相应编译工具（gcc、gc++）*

1. 配置：configure

2. 编译：make

3. 安装：make install

### rpm安装

> *需处理包间依赖*

* -i：安装
* -e：卸载
* -v：详细信息
* -h：安装进度

* -U：升级
* -q：查询

### yum安装

> *直接安装*

* install：安装
* remove：卸载
* update：更新
* search：搜索
* list：列表显示
* clean all：清空缓存
* makecache：生成缓存

